<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Genesys Messenger Integration</title>

  <script type="text/javascript">
    // Load Genesys script after the window has loaded
    window.onload = function () {
      (function (g, e, n, es, ys) {
        g['_genesysJs'] = e;
        g[e] = g[e] || function () {
          (g[e].q = g[e].q || []).push(arguments);
        };
        g[e].t = 1 * new Date();
        g[e].c = es;
        ys = document.createElement('script');
        ys.async = 1;
        ys.src = n;
        ys.charset = 'utf-8';
        document.head.appendChild(ys);
      })(window, 'Genesys', 'https://apps.cac1.pure.cloud/genesys-bootstrap/genesys.min.js', {
        deploymentId: '1eb41dea-8703-4b75-8392-10501b321535',
        environment: 'prod-cac1',
        debug: true // Enables Genesys browser console logging
      });
    };

    // Function to toggle the Messenger
    function toggleMessenger() {
      // Wait for Messenger to be ready before executing commands
      Genesys("subscribe", "Messenger.ready", function () {
        console.log("Messenger is ready");
        
        // Open the Messenger when ready
        Genesys("command", "Messenger.open", {}, 
          function () { 
            console.log("Messenger opened successfully"); 
          }, 
          function () { 
            console.log("Messenger open failed. Closing...");
            Genesys("command", "Messenger.close"); 
          }
        );
      });
    }
  </script>
</head>
<body>
  <h1>Genesys Messenger Integration</h1>
  <p>Click the button below to launch the Genesys Messenger.</p>

  <!-- Button to launch the Messenger -->
  <button type="button" id="custom-launcher" onclick="toggleMessenger()">
    Open Messenger
  </button>
</body>
</html>
